---
Version: '2012-10-17'
Statement:
  - Sid: AuthorizeRepository
    Effect: Allow
    Action: sts:AssumeRoleWithWebIdentity

    Principal:
      Federated: arn:aws:iam::${aws_account_id}:oidc-provider/token.actions.githubusercontent.com

    Condition:
      StringEquals:
        token.actions.githubusercontent.com:sub:
          - repo:${repository_name}:environment:Production
        token.actions.githubusercontent.com:aud:
          - sts.amazonaws.com
